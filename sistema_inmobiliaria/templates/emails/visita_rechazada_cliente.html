<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solicitud de visita</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .header { background: #ffc107; color: #333; padding: 20px; text-align: center; }
        .content { background: #f8f9fa; padding: 20px; }
        .property-info { background: white; padding: 15px; margin: 15px 0; border-left: 4px solid #007bff; }
        .agent-info { background: white; padding: 15px; margin: 15px 0; border-left: 4px solid #6c757d; }
        .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }
        .highlight { background: #d1ecf1; padding: 15px; border-radius: 5px; margin: 15px 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Solicitud de Visita</h1>
            <p>Información sobre tu solicitud de visita</p>
        </div>
        
        <div class="content">
            <p>Hola <strong>{{ solicitud.nombre }}</strong>,</p>
            
            <p>Gracias por tu interés en la propiedad <strong>{{ propiedad.titulo }}</strong>.</p>
            
            <div class="property-info">
                <h3>Propiedad Consultada</h3>
                <p><strong>{{ propiedad.titulo }}</strong></p>
                <p><strong>Precio:</strong> ${{ propiedad.precio|floatformat:0 }}</p>
                <p><strong>Características:</strong> {{ propiedad.habitaciones }} habitaciones | {{ propiedad.bano }} baños | {{ propiedad.estacionamiento }} estacionamientos</p>
            </div>
            
            <div class="highlight">
                <h4>Sobre tu solicitud de visita:</h4>
                <p><strong>Fecha solicitada:</strong> {{ solicitud.fecha_preferida|date:"d/m/Y" }}</p>
                <p><strong>Hora solicitada:</strong> {{ solicitud.hora_preferida|time:"H:i" }}</p>
                
                {% if solicitud.respuesta_agente %}
                <p><strong>Mensaje del agente:</strong></p>
                <p style="font-style: italic; background: white; padding: 10px; border-radius: 5px;">
                    {{ solicitud.respuesta_agente }}
                </p>
                {% else %}
                <p>Lamentablemente no podemos confirmar la visita para la fecha y hora solicitadas. Nuestro agente te contactará pronto para coordinar una nueva fecha que sea conveniente para ambos.</p>
                {% endif %}
            </div>
            
            <div class="agent-info">
                <h3>Tu Agente de Ventas</h3>
                <p><strong>{{ agente.nombre }} {{ agente.apellido }}</strong></p>
                {% if agente.telefono %}
                <p><strong>Teléfono:</strong> <a href="tel:{{ agente.telefono }}">{{ agente.telefono }}</a></p>
                {% endif %}
                {% if agente.email %}
                <p><strong>Email:</strong> <a href="mailto:{{ agente.email }}">{{ agente.email }}</a></p>
                {% endif %}
                <p><em>No dudes en contactarlo directamente para coordinar una nueva fecha.</em></p>
            </div>
            
            <div style="background: white; padding: 20px; margin: 20px 0; text-align: center; border-radius: 8px;">
                <h4>¿Quieres agendar para otra fecha?</h4>
                <p>Responde a este email o contacta directamente a tu agente para encontrar un horario que funcione para ambos.</p>
                <p><strong>Horarios disponibles:</strong> Lunes a Viernes de 9:00 a 18:00</p>
            </div>
        </div>
        
        <div class="footer">
            <p>Seguimos comprometidos en ayudarte a encontrar la propiedad perfecta.</p>
            <p><strong>¡Gracias por tu interés!</strong></p>
            <hr>
            <p>Sistema Inmobiliaria - Tu socio de confianza en bienes raíces</p>
        </div>
    </div>
</body>
</html>
